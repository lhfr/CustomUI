"use strict";(self.webpackChunkcustom_ui=self.webpackChunkcustom_ui||[]).push([[64],{36064:function(Oe,K,o){o.d(K,{y:function(){return he},m:function(){return Ve}});var be=o(76103),M=o(5574),L=o.n(M),z=o(15009),V=o.n(z),B=o(99289),A=o.n(B),D=o(13769),T=o.n(D),Q=o(9783),J=o.n(Q),X=o(97857),g=o.n(X),Y=o(96695),R=o.n(Y),x=o(62435),w=o(61837),E=o(97019),$=o(47153),W=o(50719),k=o(88385),I=o(52525),q=o(24193),_=o(42075),ee=o(56691),v=o(86074),ae=["value","onChange","readOnly"],re=function(l){var e=l.value,a=l.onChange,r=l.readOnly,n=T()(l,ae);return e||(e=[]),(0,v.jsx)(_.Z,{children:(0,v.jsx)(ee.Z,g()(g()({listType:"picture-card",className:"avatar-uploader"},n),{},{fileList:e,onChange:function(t){var c=t.fileList;a(c)},children:!r&&(0,v.jsxs)("div",{children:[(0,v.jsx)(q.Z,{}),(0,v.jsx)("div",{style:{marginTop:8},children:"Upload"})]})}))})},ne=o(13979),te=o(9669),le=o.n(te),se=["url","queryParams","enableAutoValue"],oe=function(l){var e=l.url,a=l.queryParams,r=l.enableAutoValue,n=T()(l,se),i=(0,x.useState)(n.options),t=L()(i,2),c=t[0],p=t[1],d=(0,x.useRef)();return(0,x.useEffect)(function(){d.current=n.onChange},[n.onChange]),(0,x.useEffect)(function(){if(e)le().post(e,a).then(function(h){if(h.code==="1"){var u=h.data;if(p(h.data),Array.isArray(u)&&u.length===1&&r==="onlyOne"){var f;(f=d.current)===null||f===void 0||f.call(d,u[0].value)}}});else if(Array.isArray(c)&&c.length===1&&r==="onlyOne"){var s;(s=d.current)===null||s===void 0||s.call(d,c[0].value)}},[e,a,r]),(0,v.jsx)(ne.Z,g()(g()({},n),{},{options:c}))},ie=["field","form","onChange","children"],de=["fields","setFields","form"],ue=["data","noForm","formProps"],ve=function(e,a){for(var r in e.cascader){var n;(n=e.cascader[r])!==null&&n!==void 0&&n.hasOwnProperty("valueToClearValue")&&a.setFieldValue(r,"")}},G=function(e,a,r,n){var i=!1,t=R()(e),c;try{for(t.s();!(c=t.n()).done;){var p=c.value;for(var d in a.cascader){var s;if(p.code===d&&(s=a.cascader[d])!==null&&s!==void 0&&s.hasOwnProperty("valueToParams")){n&&r.setFieldValue(p.code,"");var h=a.cascader[d].valueToParams;typeof h=="string"?p.queryParams=g()(g()({},p.queryParams),{},J()({},h,r.getFieldValue(a.code))):p.queryParams=g()(g()({},p.queryParams),{},J()({},h.code,h.formatValue(r.getFieldValue(a.code)))),i=!0}}}}catch(u){t.e(u)}finally{t.f()}return i?e.slice():e},H=function(e,a){var r=function(h){var u=h.code,f=h.disabled;return e.map(function(F){return F.code===u&&(F.disabled=f),F})},n=!1,i=R()(e),t;try{for(i.s();!(t=i.n()).done;){var c=t.value;for(var p in c.cascader){var d;(d=c.cascader[p])!==null&&d!==void 0&&d.hasOwnProperty("valueToDisabled")&&(n=n||!a.getFieldValue(c.code),e=r({code:p,disabled:n}))}}}catch(s){i.e(s)}finally{i.f()}return e},ce=function(e){var a=e.field,r=e.form,n=e.onChange,i=e.children,t=T()(e,ie),c=function(s){return Array.isArray(s)?s.length>0:!!s},p=function(s){var h;if(!a.cascader){var u;n((s==null||(u=s.target)===null||u===void 0?void 0:u.value)||s);return}for(var f in a.cascader)if(c(r.getFieldValue(f))&&a.cascader[f].valueToClearValue){var F;w.Z.confirm({title:(F=a.cascader[f])===null||F===void 0?void 0:F.valueToClearValue,onOk:function(){var y;n((s==null||(y=s.target)===null||y===void 0?void 0:y.value)||s)}});return}n((s==null||(h=s.target)===null||h===void 0?void 0:h.value)||s)};return x.cloneElement(i,g()(g()(g()({},a),t),{},{onChange:p}))},fe=function(e){var a,r=e.field,n=e.fields,i=e.setFields,t=e.form,c=e.onChange;if(["select","date","dateRange","radio","textarea","number"].includes(r.type)&&r.readOnly)return t.getFieldValue(r.code);var p=function(){var s=A()(V()().mark(function h(u){var f;return V()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:f=n,u.cascader&&(ve(u,t),f=G(f,u,t,!0),f=H(f,t),i(f)),typeof c=="function"&&(f=f.map(function(y){return y.value=t.getFieldValue(y.code),y}),c({field:u,fields:f}));case 3:case"end":return C.stop()}},h)}));return function(u){return s.apply(this,arguments)}}(),d;switch(r.type){case"select":d=(0,v.jsx)(oe,{allowClear:!0});break;case"date":d=(0,v.jsx)(E.Z,{});break;case"dateRange":d=(0,v.jsx)(E.Z.RangePicker,{});break;case"radio":d=(0,v.jsx)($.ZP.Group,{});break;case"textarea":d=(0,v.jsx)(W.Z.TextArea,{});break;case"number":d=(0,v.jsx)(k.Z,{});break;case"photo":d=(0,v.jsx)(re,{});break;default:d=(0,v.jsx)(W.Z,{allowClear:!0});break}return(0,v.jsx)(ce,{field:r,form:t,onChange:function(h){p(g()(g()({},r),{},{value:h}))},children:(a=r.render)!==null&&a!==void 0?a:d})},me=function(e){var a=e.fields,r=e.setFields,n=e.form,i=T()(e,de);return a.map(function(t){return(0,v.jsx)(I.Z.Item,{label:t.label,name:t.code,rules:[{required:t.required,message:t.message}],children:fe(g()({field:t,fields:a,setFields:r,form:n},i))},t.code)})},he=(0,x.forwardRef)(function(l,e){var a=l.data,r=l.noForm,n=l.formProps,i=T()(l,ue),t=(0,x.useState)([]),c=L()(t,2),p=c[0],d=c[1],s=I.Z.useForm(),h=L()(s,1),u=h[0];(0,x.useEffect)(function(){f(a)},[a]);var f=function(){var C=A()(V()().mark(function y(P){var j,m,O,U,b;return V()().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:j=!1,m=P,O=R()(P);try{for(O.s();!(U=O.n()).done;)b=U.value,u.setFieldValue(b.code,b.value),i.readOnly!==void 0&&(b.readOnly=i.readOnly,j=!0),m=G(m,b,u,!1),m=H(m,u)}catch(Te){O.e(Te)}finally{O.f()}m=j?structuredClone(m):m,d(m);case 6:case"end":return Z.stop()}},y)}));return function(P){return C.apply(this,arguments)}}();(0,x.useImperativeHandle)(e,function(){return{form:u,setFieldsValue:function(y){u.setFieldsValue(y)},getFieldsValue:function(){return A()(V()().mark(function y(){var P;return V()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.prev=0,m.next=3,u.validateFields();case 3:return P=m.sent,m.abrupt("return",P);case 7:return m.prev=7,m.t0=m.catch(0),m.abrupt("return",m.t0.errorFields[0].errors[0]);case 10:case"end":return m.stop()}},y,null,[[0,7]])}))()},resetFieldsValue:function(y){u.resetFields(y)},setFieldsAttribute:function(y){var P=p.map(function(j){for(var m in y)j.code===m&&y[m]&&(j=g()(g()({},j),y[m]));return j});d(P)}}});var F=(0,v.jsx)(me,g()({fields:p,setFields:d,form:u},i));return r?F:(0,v.jsx)(I.Z,g()(g()({form:u},g()({labelCol:{span:4},wrapperCol:{span:18}},n)),{},{children:F}))}),pe=o(68400),ge=o.n(pe),S=o(71890),ye=o(87698),Fe=function(l){var e,a=l.current,r=l.onlyLeafJump,n=l.disabledJumpIds,i=l.onRightClick,t=!a.children||((e=a.children)===null||e===void 0?void 0:e.length)===0,c=!r||t&&r,p=!(n!=null&&n.includes(a.id));return(0,v.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,v.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[t&&(0,v.jsx)("span",{style:{width:5,height:5,borderRadius:"50%",background:"#949ca4",marginLeft:3,marginRight:6}}),a.name]}),(0,v.jsxs)("div",{className:"flex",style:{alignItems:"center"},onClick:function(s){s.stopPropagation(),typeof i=="function"&&i(a)},children:[a.value,(0,v.jsx)("div",{className:"flex",style:{width:10,height:10,alignItems:"center"},children:c&&p&&(0,v.jsx)("span",{style:{width:6,height:6,border:"1px solid #949ca4",borderWidth:"1px 1px 0 0",transform:"rotate(45deg)",marginLeft:5}})})]})]})},Ce=["url","queryParams","data","async","onlyLeafJump","disabledJumpIds","onRightClick"],N,xe=ye.ZP.div(N||(N=ge()([`
  .rc-tree-node-content-wrapper {
    padding-right: 0 !important;
  }
  .rc-tree-title {
    width: 100%;
  }
  .rc-tree-switcher-noop {
    width: 0px !important;
  }
`]))),je=function l(e){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"-1",r=[];return e.forEach(function(n){if(n.pid===a){var i=l(e,n.id);i.length!==0&&(n.children=i),r.push(n)}}),r},Pe=function l(e,a){var r=R()(e),n;try{for(r.s();!(n=r.n()).done;){var i,t=n.value,c=a==null||(i=a[0])===null||i===void 0?void 0:i.pid;if(t.id===c){t.children=a;return}Array.isArray(t.children)&&l(t.children,a)}}catch(p){r.e(p)}finally{r.f()}return Object.clone(e)},Ve=function(l){var e=l.url,a=l.queryParams,r=l.data,n=l.async,i=l.onlyLeafJump,t=l.disabledJumpIds,c=l.onRightClick,p=T()(l,Ce),d=(0,x.useState)(r),s=L()(d,2),h=s[0],u=s[1];return(0,x.useEffect)(function(){e&&S.KW.post(e,a).then(function(f){f.code==="1"&&u(je(f.data))})},[e,a]),(0,v.jsx)(xe,{children:(0,v.jsx)(S.jk.Tree,g()({list:h,checkable:!1,itemRender:function(F){return(0,v.jsx)(Fe,{current:F,onlyLeafJump:i,disabledJumpIds:t,onRightClick:c})},onSelect:function(F){n&&!F.children&&S.KW.post("".concat(e,"?id=").concat(F.id),a).then(function(C){C.code==="1"&&u(Pe(h,C.data))})}},p))})}}}]);
